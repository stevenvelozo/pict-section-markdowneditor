<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Server Upload - Pict Example</title>
		<!-- PICT Dynamic View CSS Container -->
		<style id="PICT-CSS"></style>
		<style>
			*, *::before, *::after { box-sizing: border-box; }
			body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #F0F4F8; color: #333; }

			/* --- Header Bar --- */
			.pict-example-header { display: flex; align-items: stretch; background: #1B2838; border-bottom: 3px solid #5C7AEA; }
			.pict-example-badge { background: #5C7AEA; color: #fff; padding: 0.6rem 1rem; font-size: 0.7rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.1em; display: flex; align-items: center; gap: 0.5rem; }
			.pict-example-badge svg { width: 14px; height: 14px; fill: #fff; flex-shrink: 0; }
			.pict-example-app-name { padding: 0.6rem 1rem; color: #E0E8FF; font-size: 1.1rem; font-weight: 600; display: flex; align-items: center; }
			.pict-example-module { margin-left: auto; padding: 0.6rem 1rem; color: #8899BB; font-size: 0.75rem; display: flex; align-items: center; letter-spacing: 0.03em; }

			/* --- Main layout: editor + sidebar --- */
			.main-layout { display: flex; gap: 20px; max-width: 1200px; margin: 0 auto; padding: 1.5rem; }
			.editor-column { flex: 1 1 0; min-width: 0; }
			.sidebar-column { flex: 0 0 260px; }

			/* --- Editor wrapper --- */
			#MarkdownEditorContainer { background: #FFF; border-radius: 8px; box-shadow: 0 1px 6px rgba(0,0,0,0.08); padding: 16px; }

			/* --- Info panel --- */
			.info-panel {
				background: #FFF;
				border-radius: 8px;
				box-shadow: 0 1px 6px rgba(0,0,0,0.08);
				padding: 16px;
				margin-bottom: 16px;
			}
			.info-panel h3 { margin: 0 0 8px 0; font-size: 0.85rem; color: #5C7AEA; text-transform: uppercase; letter-spacing: 0.05em; }
			.info-panel p { margin: 0 0 6px 0; font-size: 0.82rem; color: #555; line-height: 1.5; }
			.info-panel code { background: #F0F4F8; padding: 1px 5px; border-radius: 3px; font-size: 0.78rem; color: #1B2838; }

			/* --- Upload status --- */
			.upload-status { min-height: 24px; font-size: 0.78rem; padding: 4px 0; transition: all 0.2s; }
			.upload-status-pending { color: #5C7AEA; }
			.upload-status-success { color: #2D9F5A; }
			.upload-status-error { color: #D9534F; }

			/* --- Uploads list --- */
			.uploads-panel {
				background: #FFF;
				border-radius: 8px;
				box-shadow: 0 1px 6px rgba(0,0,0,0.08);
				padding: 16px;
			}
			.uploads-panel h3 { margin: 0 0 10px 0; font-size: 0.85rem; color: #5C7AEA; text-transform: uppercase; letter-spacing: 0.05em; }
			.upload-list-empty { font-size: 0.8rem; color: #999; }
			.upload-list-item {
				display: flex;
				align-items: center;
				gap: 10px;
				padding: 6px 0;
				border-bottom: 1px solid #F0F4F8;
			}
			.upload-list-item:last-child { border-bottom: none; }
			.upload-list-thumb {
				width: 40px;
				height: 40px;
				border-radius: 4px;
				object-fit: cover;
				background: #F0F4F8;
				border: 1px solid #E0E4E8;
				flex-shrink: 0;
			}
			.upload-list-info { min-width: 0; overflow: hidden; }
			.upload-list-name {
				display: block;
				font-size: 0.75rem;
				color: #333;
				white-space: nowrap;
				overflow: hidden;
				text-overflow: ellipsis;
			}
			.upload-list-size { font-size: 0.7rem; color: #999; }
		</style>
		<script src="./codemirror-bundle.js" type="text/javascript"></script>
		<script src="./pict.min.js" type="text/javascript"></script>
		<script type="text/javascript">
			Pict.safeOnDocumentReady(() => { Pict.safeLoadPictApplication(PictSectionMarkdowneditorServerUploadExample, 1); });
		</script>
	</head>
	<body>
		<div class="pict-example-header">
			<div class="pict-example-badge">
				<svg viewBox="0 0 16 16"><polygon points="8,1 10,6 16,6 11,9.5 13,15 8,11.5 3,15 5,9.5 0,6 6,6"/></svg>
				Pict Example
			</div>
			<div class="pict-example-app-name">Server Upload</div>
			<div class="pict-example-module">pict-section-markdowneditor + orator</div>
		</div>
		<div class="main-layout">
			<div class="editor-column">
				<div id="MarkdownEditorContainer"></div>
			</div>
			<div class="sidebar-column">
				<div class="info-panel">
					<h3>How It Works</h3>
					<p>Paste, drag, or pick an image â€” it uploads to the server via <code>POST /api/upload-image</code> and inserts a URL instead of a base64 data URI.</p>
					<p>Uploaded files are saved to <code>dist/uploads/</code> and served as static files.</p>
					<div id="UploadStatus" class="upload-status"></div>
				</div>
				<div class="uploads-panel">
					<h3>Uploaded Files</h3>
					<div id="UploadsList"><em class="upload-list-empty">No uploads yet</em></div>
				</div>
			</div>
		</div>
		<script src="./pict-section-markdowneditor-server-upload-example.min.js" type="text/javascript"></script>
	</body>
</html>
